<?xml version="1.0" encoding="UTF-8" ?>

<odoo>
    <data>

        <template id="third_custom_invoice">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.basic_layout">

<!--                        <div class="page" style="font-size: 10pt; font-family: Arial, Helvetica, sans-serif;">-->
                        <div class="page" style="font-size: 11pt; font-family: Tahoma, Verdana, Arial, Geneva, Tahoma, sans-serif;">
                            <div class="oe_structure"/>
                            <br/>
                            <br/>
                            <div class="row" style="height:28mm;">
<!--                            <div class="row" style="height:35mm;">-->
                                <div class="col-3">
<!--                                    <strong>FECHA DE FACTURA:</strong>-->
<!--                                    <span t-field="o.invoice_date"/>-->
                                </div>
                                <div class="col-6" style="line-height: 120%;">

<!--                                            <strong>Cliente:</strong>-->
                                    <span t-field="o.partner_id"/>
                                    <br/>
<!--                                    <strong>Dirección:</strong>-->
                                    <span t-esc="address"/>
                                    <br/>
                                    <div class="row">
                                        <div class="col-7">
                                            <span t-field="o.partner_id.phone"/>
                                        </div>
                                        <div class="col-5">
                                            <strong>RIF:</strong>
                                            <span t-field="o.partner_id.vat"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-3 text-right" style="font-size: 12pt; line-height: 130%">
                                    <br/>
                                    <t t-if="o.x_tipodoc == 'Recibo'">
                                        <stron>
                                            <span>Recibo</span>
                                            <br/>
                                            <span t-field="o.ref"/>
        <!--                                    <strog><span t-field="o.ref"/></strog>-->
                                        </stron>
                                    </t>
                                    <t t-elif="o.x_tipodoc == 'Nota de Crédito'">
                                        <stron>
                                            <span>NOTA DE CREDITO</span>
                                            <br/>
                                            <span t-field="o.ref"/>
        <!--                                    <strog><span t-field="o.ref"/></strog>-->
                                        </stron>
                                    </t>
                                    <t t-elif="o.x_tipodoc == 'Nota de Débito'">
                                        <stron>
                                            <span>NOTA DE DEBITO</span>
                                            <br/>
                                            <span t-field="o.ref"/>
        <!--                                    <strog><span t-field="o.ref"/></strog>-->
                                        </stron>
                                    </t>
                                    <t t-else="">
                                        <stron>
                                            <span>FACTURA</span>
                                            <br/>
                                            <span style="font-size: 10pt;">
                                                FECHA: <span t-field="o.invoice_date"/>
                                            </span>
                                        </stron>
                                    </t>
                                </div>
                            </div>
                            <br/>
                            <div style="line-height: 100%;">
                                <table class="table table-sm table-borderless">
<!--                                        <thead>-->
<!--                                            <tr>-->
<!--                                                <th name="th_201" class="text-center"><span>FECHA DOCUMENTO</span></th>-->
<!--                                                <th name="th_202" class="text-center"><span>FECHA DE VENCIMIENTO</span></th>-->
<!--                                                <th name="th_203" class="text-center"><span>NUMERO FACTURA AFECTADA</span></th>-->
<!--                                                <th name="th_204" class="text-center"><span>ORDEN DE COMPRA</span></th>-->
<!--                                                <th name="th_205" class="text-center"><span>CONDICION DE PAGO</span></th>-->
<!--                                                <th name="th_206" class="text-center"><span>VENDEDOR</span></th>-->
<!--                                            </tr>-->
<!--                                        </thead>-->
                                    <tbody>
                                        <tr>
<!--                                            <td name="td_101" class="text-center" style="width: 16%;"><span t-field="o.invoice_date"/></td>-->
                                            <td name="td_101" class="text-center" style="width: 17%;"><span t-field="o.ref"/></td>
<!--                                            <td name="td_102" class="text-center" style="width: 40%;"><span t-field="o.invoice_date_due"/></td>-->
                                            <td name="td_102" class="text-center" style="width: 16%;"><span t-field="o.invoice_date_due"/></td>
<!--                                            <td name="td_103" class="text-center" style="width: 9%;"><span t-field="o.reversed_entry_id.ref"/></td>-->
                                            <td name="td_103" class="text-center" style="width: 15%;"><span t-field="o.x_npedido"/></td>
<!--                                            <td name="td_104" class="text-center" style="width: 13%;"><span t-field="o.x_purchase_order"/></td>-->
                                            <td name="td_104" class="text-center" style="width: 16%;"><span t-field="o.x_purchase_order"/></td>
<!--                                            <td name="td_105" class="text-center" style="width: 14%;"><span t-field="o.invoice_payment_term_id.name"/></td>-->
                                            <td name="td_105" class="text-center" style="width: 14%;"><span t-field="o.invoice_payment_term_id.name"/></td>
<!--                                                <td name="td_106" class="text-center"><span t-field="o.invoice_user_id.name"/></td>-->
                                            <td name="td_106" class="text-center" style="width: 14%;"/>
                                            <td name="td_107" class="text-center" style="width: 8%;"/>
                                        </tr>
                                    </tbody>
<!--                                    </t>-->
                                </table>
                            </div>
                            <br/>
                            <div style="height:33mm; line-height: 110%;">
                                <table class="table table-sm table-borderless" name="invoice_line_table">
<!--                                    <thead>-->
<!--                                        <tr>-->
<!--                                            <t t-if="o.x_tipodoc == 'Factura'">-->
<!--                                                <th name="th_code" class="text-left"><span>Código</span></th>-->
<!--                                            </t>-->
<!--                                            <th name="th_description" class="text-left"><span>Descripción</span></th>-->
<!--                                            <th name="th_quantity" class="text-left"><span>Cantidad</span></th>-->
<!--                                            <th name="th_priceunit" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Precio Unitario</span></th>-->
<!--                                            <th name="th_tax" t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>IVA</span></th>-->
<!--                                            <th name="th_discount" t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
<!--                                                <span>Disc.%</span>-->
<!--                                            </th>-->
<!--                                            <th name="th_subtotal" class="text-right">-->
<!--                                                <span groups="account.group_show_line_subtotals_tax_excluded">Monto</span>-->
<!--                                                <span groups="account.group_show_line_subtotals_tax_included">Precio Total</span>-->
<!--                                            </th>-->
<!--                                        </tr>-->
<!--                                    </thead>-->
                                    <tbody class="invoice_tbody">
                                        <t t-set="current_subtotal" t-value="0"/>

                                        <t t-foreach="lines" t-as="line">
                                            <t t-set="current_subtotal" t-value="current_subtotal + line['price_subtotal']" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <t t-set="current_subtotal" t-value="current_subtotal + line['price_total']" groups="account.group_show_line_subtotals_tax_included"/>

                                            <tr style="max-height:10px;" t-att-class="'bg-200 font-weight-bold o_line_section' if line['display_type'] == 'line_section' else 'font-italic o_line_note' if line['display_type'] == 'line_note' else ''">
                                                <t t-if="not line['display_type']" name="account_invoice_line_accountable">

                                                    <td class="text-left" style="width: 16%;">
                                                        <t t-if="o.x_tipodoc == 'Factura'">
                                                            <span t-esc="line['default_code']"/>
                                                        </t>
                                                    </td>

                                                    <td name="account_invoice_line_name" style="width: 40%;"><span t-esc="line['name']" t-options="{'widget': 'text'}"/></td>

                                                    <td class="text-left" style="width: 9%;">
                                                        <span t-esc="line['quantity']"/>
                                                        <span t-esc="line['product_uom_id']" />
                                                    </td>

                                                    <td class="text-right" style="width: 13%;">
                                                        <span class="text-nowrap" t-esc="line['price_unit_2']"/>
                                                    </td>

                                                    <td class="text-right o_price_total" style="width: 14%;">
                                                        <span class="text-nowrap" t-esc="line['price_subtotal_2']" groups="account.group_show_line_subtotals_tax_excluded"/>
                                                        <span class="text-nowrap" t-esc="line['price_total_2']" groups="account.group_show_line_subtotals_tax_included"/>

                                                    </td>

                                                    <td name="tax" class="text-right" style="width: 8%;"><span t-options="{'widget': 'text'}">16,00</span></td>
                                                </t>
                                                <t t-if="line['display_type'] == 'line_section'">
                                                    <td colspan="99">
                                                        <span t-esc="line['name']" t-options="{'widget': 'text'}"/>
                                                    </td>
                                                    <t t-set="current_section" t-value="line"/>
                                                    <t t-set="current_subtotal" t-value="0"/>
                                                </t>
                                                <t t-if="line['display_type'] == 'line_note'">
                                                    <td colspan="99">
                                                        <span t-esc="line['name']" t-options="{'widget': 'text'}"/>
                                                    </td>
                                                </t>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                            <div class="row" style="line-height: 120%">
                                <div class="col-4">
                                    <t t-if="o.x_tipodoc == 'Factura'">
                                        <div name="payment_currency" style="font-size: 9pt;">
                                            <t t-set="total_currency_amount" t-value="o.amount_untaxed / o.x_tasa"/>
                                            <p> ESTA FACTURA REPRESENTA U$D <span t-esc="total_currency_amount" t-options='{"widget": "float", "precision": 2}'/> A TASA BCV BsD. <span t-field="o.x_tasa" t-options='{"widget": "float", "precision": 2}'/> FECHA <span t-field="o.invoice_date"/> CONFORME A LO ESTABLECIDO EN EL ART. 25 DE LA LEY DE IVA Y ART. 13 No 14 PROVIDENCIA 0071</p>
                                        </div>
                                    </t>
<!--                                    <t t-elif="o.x_tipodoc == 'Nota de Crédito'">-->
                                    <t t-else="">
                                        <t t-if="o.x_tipodoc == 'Nota de Débito'">
                                            <span>TASA BCV </span>
                                            <span t-field="o.x_tasa"/>
                                            <span> FECHA </span>
                                            <span t-field="o.invoice_date"/>
                                            <br/>
                                            <br/>
                                        </t>
                                        <span>TOTAL FACTURA BsD </span>
                                        <span t-field="o.reversed_entry_id.amount_total"/>
                                        <span>// FECHA </span>
                                        <span t-field="o.reversed_entry_id.invoice_date"/>
                                    </t>
                                </div>
                                <div class="col-3" style="font-size: 8pt;">
                                    <t t-if="o.x_tipodoc == 'Factura'">
                                        <p>Si la cancelación de esta factura se realiza en divisas entregados en efectivo ó depositadas en efectivo en la banca nacional, así como a travéz de transferencias ó depositos en bancos en el exterior se debe adicionar el 3% de IGTF, de acuerdo con lo establecido en la G.O.42.339 del 17/03/2022.</p>
                                    </t>
                                </div>
                                <div class="col-3"/>
                                <div class="col-2">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="clearfix">
                                        <div id="total" class="row">
                                            <table class="table table-sm" style="page-break-inside: avoid; line-height: 100%">

                                                <!--Tax totals-->
                                                <tr class="border-black o_subtotal">
<!--                                                    <td><strong>Base Imponible</strong></td>-->
                                                    <td/>
                                                    <td class="text-right">
                                                        <span
                                                            t-att-class="oe_subtotal_footer_separator"
                                                            t-esc="amount_untaxed"
                                                        />
                                                    </td>
                                                </tr>

                                                <tr>
<!--                                                    <td><strong>Descuento</strong></td>-->
                                                    <td/>
                                                    <td class="text-right">
                                                        <t t-if="discount_sum">
                                                            <span
                                                                t-att-class="oe_subtotal_footer_separator"
                                                                t-esc="discount_sum"
                                                            />
                                                        </t>
                                                        <t t-if="not discount_sum">
                                                            <span t-att-class="oe_subtotal_footer_separator">0.0</span>
                                                        </t>
                                                    </td>
                                                </tr>

                                                <tr>
<!--                                                    <td><strong>Total a IVA 16%</strong></td>-->
                                                    <td/>
                                                    <td class="text-right">
                                                        <t t-if="tax_iva">
                                                            <span
                                                                t-att-class="oe_subtotal_footer_separator"
                                                                t-esc="tax_iva"
                                                            />
                                                        </t>
                                                        <t t-if="not tax_iva">
                                                            <span t-att-class="oe_subtotal_footer_separator">0.0</span>
                                                        </t>
                                                    </td>
                                                </tr>

                                                <tr class="border-black o_total">
                                                    <td/>
                                                    <td class="text-right">
                                                        <span
                                                            t-att-class="oe_subtotal_footer_separator"
                                                            t-esc="amount_total"
                                                        />
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right" style="font-size: 9pt;">
                                <span t-field="o.x_ncontrol"/>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
